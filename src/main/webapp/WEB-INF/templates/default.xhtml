<!DOCTYPE html>
<html lang="#{localeManager.language}"
   xmlns="http://www.w3.org/1999/xhtml"
   xmlns:h="http://java.sun.com/jsf/html"
   xmlns:f="http://java.sun.com/jsf/core"
   xmlns:p="http://primefaces.org/ui"
   xmlns:ui="http://java.sun.com/jsf/facelets">
   
<ui:insert name="metadata" />
<h:head>
   <meta http-equiv="X-UA-Compatible" content="IE=edge" />
   <meta charset="utf-8" />
   <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
   <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
   <meta name="apple-mobile-web-app-capable" content="yes" />
   <link rel="shortcut icon" type="image/x-icon" href="#{request.contextPath}/resources/gfx/G_favicon.ico" sizes="16x16" />
   <link rel="icon" type="image/x-icon" href="#{request.contextPath}/resources/gfx/G_favicon.ico" sizes="16x16" />
   <h:outputScript library="primefaces" name="jquery/jquery.js" />
   <h:outputScript library="js" name="uitext-sidebar.js" />
   <h:outputScript library="js" name="uitext-topbar.js" />
   <ui:insert name="head" />
   <script>
   		(function($) {
   			$(document).ready(function() {
   	   			uitext.sidebar.init();
   	   			uitext.topbar.init();
   			});
   	    })(jQuery);
   </script>
</h:head>
<h:body>
	<f:view locale="#{localeManager.locale}">
	<f:facet name="last">
		<h:outputStylesheet name="css/dashboard.css" />
		<h:outputStylesheet name="css/pf-overrides.css" />		
	</f:facet>
    <p:ajaxStatus onstart="PF('status').show()" oncomplete="PF('status').hide()"/>
	<p:dialog widgetVar="status" modal="true" resizable="false" closable="false" showHeader="false">
	   <h:graphicImage value="/resources/gfx/712.GIF"></h:graphicImage>
    </p:dialog>
<!--     styleClass="wrapper#{sessionState.showSidebar ? ' sidebar-active-m' : ' sidebar-inactive-l'}" -->
    <h:panelGroup id="wrapperId" layout="block" styleClass="wrapper">
    	<ui:include src="topbar.xhtml" />
		<ui:include src="sidebar.xhtml" />
	    <h:panelGroup id="mainId" layout="block" styleClass="main">
	         <ui:insert name="content">
	             [Template content will be inserted here]
	         </ui:insert>
	    </h:panelGroup>
	    <div class="footer">
        	<p>Application footer</p>
    	</div>
    </h:panelGroup>
    
	<!-- Dialogruta för skapa/ändra ui-texter -->
    <p:dialog id="ui-text-dialog" modal="true" header="#{not empty textAdmin.selectedText.value ? 'Ändra' : 'Skapa'} uitext" resizable="false"
		widgetVar="editUitextDialog">
		<h:form>
			<h:panelGrid columns="2" cellpadding="5">
				<h:outputLabel for="key-uitext" value="Nyckel:" />
				<h:outputText value="#{textAdmin.selectedText.key}" rendered="#{not empty textAdmin.selectedText.value}" />
				<p:inputText id="key-uitext" value="#{textAdmin.selectedText.key}" rendered="#{empty textAdmin.selectedText.value}"
					required="true" label="key-uitext" />

				<h:outputLabel for="text-uitext" value="Text:" />
				<p:inputTextarea id="text-uitext" value="#{textAdmin.selectedText.value}"
					required="true" label="text-uitext" rows="6" cols="50" />

				<f:facet name="footer">
					<p:commandButton id="idTextButtonUpdate" rendered="#{not empty textAdmin.selectedText.value}"
						action="#{textAdmin.updateSelectedText()}" value="Uppdatera"
						update=":mainId"
						oncomplete="PF('editUitextDialog').hide();">
					</p:commandButton>
					<p:commandButton id="idTextButtonCreate" rendered="#{empty textAdmin.selectedText.value}"
						action="#{textAdmin.updateSelectedText()}" value="Skapa"
						update=":mainId"
						oncomplete="PF('editUitextDialog').hide();">
					</p:commandButton>
					<p:commandButton id="idTextButtonUpdateCancel" value="Avbryt"
						type="button" onclick="PF('editUitextDialog').hide();">
					</p:commandButton>
				</f:facet>
				<!-- @widgetVar(textTableW) -->
			</h:panelGrid>
		</h:form>
	</p:dialog>
	</f:view>
</h:body>
</html>
